@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light;
  --color-primary: #A78BFA;
  --color-primary-strong: #7C5CED;
  --color-primary-soft: #EFE7FF;
  --color-primary-softer: #F6F1FF;
  --color-primary-border: #D9CCFF;
  --color-accent: #F9A8D4;
  --color-on-primary: #ffffff;
  --color-bg: #FDF6F0;
  --color-surface: #ffffff;
  --color-surface-muted: #FAF3EE;
  --color-border: #EADFD8;
  --color-muted: #7C7C7C;
  --color-heading: #2D2A32;
  --color-text: #2D2A32;
  --color-shadow: rgba(45, 42, 50, 0.08);
  --color-success: #16a34a;
  --color-success-soft: #ecfdf5;
  --color-error: #dc2626;
  --color-error-soft: #fee2e2;
  --color-warning: #c2410c;
  --color-warning-soft: #ffe9d6;
  --highlight-gradient: linear-gradient(135deg, #A78BFA, #F9A8D4);
  --brand-50: #f6f0ff;
  --brand-100: #ede4ff;
  --brand-200: #dacfff;
  --brand-300: #c1b0ff;
  --brand-400: #b199ff;
  --brand-500: #A78BFA;
  --brand-600: #8b5cf6;
  --brand-700: #5b21b6;
  --brand-50-rgb: 246 240 255;
  --brand-100-rgb: 237 228 255;
  --brand-200-rgb: 218 207 255;
  --brand-300-rgb: 193 176 255;
  --brand-400-rgb: 177 153 255;
  --brand-500-rgb: 167 139 250;
  --brand-600-rgb: 139 92 246;
  --brand-700-rgb: 91 33 182;
  --accent-rgb: 249 168 212;
}

/* Utility to hide scrollbars while keeping scrolling available (for mobile carousels) */
.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Safari and Chrome */
}

/* Compact button utilities for consistent small CTAs */
@layer components {
  .btn-sm {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-2 text-sm font-semibold;
  }
  .btn-sm-primary {
    @apply text-white shadow transition hover:-translate-y-0.5 focus:outline-none;
    background-image: var(--highlight-gradient);
    box-shadow: 0 15px 35px rgba(45, 42, 50, 0.15), 0 10px 25px rgba(167, 139, 250, 0.35);
    border: none;
    color: var(--color-on-primary);
  }
  .btn-sm-primary:hover {
    box-shadow: 0 20px 40px rgba(45, 42, 50, 0.2), 0 15px 35px rgba(249, 168, 212, 0.4);
  }
  .btn-sm-outline {
    @apply bg-white;
    border: 1px solid var(--color-primary-border);
    color: var(--color-primary);
    transition: all 200ms ease;
  }
  .btn-sm-outline:hover {
    border-color: var(--color-primary);
    color: var(--color-primary-strong);
  }
  .btn-sm-ghost {
    color: var(--color-primary);
    transition: color 200ms ease, background-color 200ms ease;
  }
  .btn-sm-ghost:hover {
    background-color: var(--color-primary-soft);
  }
}

/* Brand palette overrides ensure every rose-* utility uses our cooler indigo/cyan combo */
.bg-rose-50 { background-color: var(--brand-50) !important; }
.bg-rose-100 { background-color: var(--brand-100) !important; }
.bg-rose-200 { background-color: var(--brand-200) !important; }
.bg-rose-300 { background-color: var(--brand-300) !important; }
.bg-rose-400 { background-color: var(--brand-400) !important; }
.bg-rose-500 { background-color: var(--brand-500) !important; }
.bg-rose-600 { background-color: var(--brand-600) !important; }
.bg-rose-700 { background-color: var(--brand-700) !important; }
.bg-rose-50\/40 { background-color: rgb(var(--brand-50-rgb) / 0.4) !important; }
.bg-rose-50\/50 { background-color: rgb(var(--brand-50-rgb) / 0.5) !important; }
.bg-rose-50\/60 { background-color: rgb(var(--brand-50-rgb) / 0.6) !important; }
.bg-rose-50\/70 { background-color: rgb(var(--brand-50-rgb) / 0.7) !important; }
.bg-rose-50\/80 { background-color: rgb(var(--brand-50-rgb) / 0.8) !important; }
.bg-rose-100\/30 { background-color: rgb(var(--brand-100-rgb) / 0.3) !important; }
.bg-rose-100\/40 { background-color: rgb(var(--brand-100-rgb) / 0.4) !important; }
.bg-rose-100\/50 { background-color: rgb(var(--brand-100-rgb) / 0.5) !important; }
.bg-rose-100\/60 { background-color: rgb(var(--brand-100-rgb) / 0.6) !important; }
.bg-rose-100\/70 { background-color: rgb(var(--brand-100-rgb) / 0.7) !important; }
.bg-rose-200\/40 { background-color: rgb(var(--brand-200-rgb) / 0.4) !important; }
.bg-rose-200\/50 { background-color: rgb(var(--brand-200-rgb) / 0.5) !important; }
.bg-rose-200\/60 { background-color: rgb(var(--brand-200-rgb) / 0.6) !important; }
.bg-rose-200\/70 { background-color: rgb(var(--brand-200-rgb) / 0.7) !important; }
.bg-rose-200\/80 { background-color: rgb(var(--brand-200-rgb) / 0.8) !important; }
.bg-rose-400\/70 { background-color: rgb(var(--brand-400-rgb) / 0.7) !important; }
.bg-rose-500\/95 { background-color: rgb(var(--brand-500-rgb) / 0.95) !important; }
.text-rose-200 { color: var(--brand-200) !important; }
.text-rose-300 { color: var(--brand-300) !important; }
.text-rose-400 { color: var(--brand-400) !important; }
.text-rose-500 { color: var(--brand-500) !important; }
.text-rose-600 { color: var(--brand-600) !important; }
.text-rose-700 { color: var(--brand-700) !important; }
.border-rose-50 { border-color: var(--brand-50) !important; }
.border-rose-100 { border-color: var(--brand-100) !important; }
.border-rose-200 { border-color: var(--brand-200) !important; }
.border-rose-300 { border-color: var(--brand-300) !important; }
.border-rose-400 { border-color: var(--brand-400) !important; }
.border-rose-500 { border-color: var(--brand-500) !important; }
.from-rose-50 {
  --tw-gradient-from: rgb(var(--brand-50-rgb)) !important;
  --tw-gradient-to: rgb(var(--brand-50-rgb) / 0) !important;
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to) !important;
}
.from-rose-100 {
  --tw-gradient-from: rgb(var(--brand-100-rgb)) !important;
  --tw-gradient-to: rgb(var(--brand-100-rgb) / 0) !important;
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to) !important;
}
.from-rose-200 {
  --tw-gradient-from: rgb(var(--brand-200-rgb)) !important;
  --tw-gradient-to: rgb(var(--brand-200-rgb) / 0) !important;
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to) !important;
}
.from-rose-400 {
  --tw-gradient-from: rgb(var(--brand-400-rgb)) !important;
  --tw-gradient-to: rgb(var(--brand-400-rgb) / 0) !important;
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to) !important;
}
.from-rose-500 {
  --tw-gradient-from: rgb(var(--brand-500-rgb)) !important;
  --tw-gradient-to: rgb(var(--brand-500-rgb) / 0) !important;
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to) !important;
}
.via-rose-50 {
  --tw-gradient-stops: var(--tw-gradient-from), rgb(var(--brand-50-rgb)), var(--tw-gradient-to, rgb(var(--brand-50-rgb) / 0)) !important;
}
.via-rose-400 {
  --tw-gradient-stops: var(--tw-gradient-from), rgb(var(--brand-400-rgb)), var(--tw-gradient-to, rgb(var(--brand-400-rgb) / 0)) !important;
}
.to-rose-50 { --tw-gradient-to: rgb(var(--brand-50-rgb)) !important; }
.to-rose-100 { --tw-gradient-to: rgb(var(--brand-100-rgb)) !important; }
.to-rose-300 { --tw-gradient-to: rgb(var(--brand-300-rgb)) !important; }
.shadow-rose-100\/30 { --tw-shadow-color: rgb(var(--brand-300-rgb) / 0.3) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-100\/40 { --tw-shadow-color: rgb(var(--brand-300-rgb) / 0.4) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-100\/50 { --tw-shadow-color: rgb(var(--brand-300-rgb) / 0.5) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-100\/60 { --tw-shadow-color: rgb(var(--brand-300-rgb) / 0.6) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-100\/70 { --tw-shadow-color: rgb(var(--brand-300-rgb) / 0.7) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-200\/40 { --tw-shadow-color: rgb(var(--brand-500-rgb) / 0.4) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-200\/50 { --tw-shadow-color: rgb(var(--brand-500-rgb) / 0.5) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-200\/60 { --tw-shadow-color: rgb(var(--brand-500-rgb) / 0.6) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-200\/70 { --tw-shadow-color: rgb(var(--brand-500-rgb) / 0.7) !important; --tw-shadow: var(--tw-shadow-colored) !important; }
.shadow-rose-200\/80 { --tw-shadow-color: rgb(var(--brand-500-rgb) / 0.8) !important; --tw-shadow: var(--tw-shadow-colored) !important; }

.highlight-gradient {
  background-image: var(--highlight-gradient);
  color: var(--color-on-primary);
}

[data-theme='mauve'] {
  /* Mauve & Grey palette (custom provided) */
  --color-primary: #877c93; /* main mauve */
  --color-primary-strong: #ae838e; /* stronger accent */
  --color-primary-soft: #c98d95; /* soft accent */
  --color-primary-softer: #ddcdc0; /* very soft */
  --color-primary-border: #e7cb82; /* warm border accent (used sparingly) */
  --color-on-primary: #ffffff;
  --color-bg: #faf7f9; /* light neutral background */
  --color-surface: #ffffff;
  --color-surface-muted: #f7f3f4;
  --color-border: #e9e2e6;
  --color-muted: #7b7480; /* neutral text */
  --color-heading: #2b2430;
  --color-text: #1f1a1f;
  --color-shadow: rgba(135, 124, 147, 0.06);
}

[data-theme='slate'] {
  --color-primary: #475569;
  --color-primary-strong: #334155;
  --color-primary-soft: #e2e8f0;
  --color-primary-softer: #f1f5f9;
  --color-primary-border: #cbd5f5;
  --color-on-primary: #f8fafc;
  --color-bg: #f4f6fa;
  --color-surface: #ffffff;
  --color-surface-muted: #f1f5f9;
  --color-border: #d7dde7;
  --color-muted: #64748b;
  --color-heading: #0f172a;
  --color-text: #1e293b;
  --color-shadow: rgba(15, 23, 42, 0.08);
}

[data-theme='emerald'] {
  --color-primary: #059669;
  --color-primary-strong: #047857;
  --color-primary-soft: #d1fae5;
  --color-primary-softer: #ecfdf5;
  --color-primary-border: #6ee7b7;
  --color-on-primary: #f0fdf4;
  --color-bg: #f4f7f5;
  --color-surface: #ffffff;
  --color-surface-muted: #f0f9f5;
  --color-border: #d8f5e8;
  --color-muted: #4b5563;
  --color-heading: #064e3b;
  --color-text: #1f2937;
  --color-shadow: rgba(4, 120, 87, 0.08);
}

html,
body,
#root {
  height: 100%;
}

body {
  background-color: var(--color-bg);
  background-image:
    radial-gradient(circle at 20% 20%, rgba(167, 139, 250, 0.18), transparent 45%),
    radial-gradient(circle at 80% 0%, rgba(249, 168, 212, 0.2), transparent 50%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.6), rgba(253, 246, 240, 0.95));
  background-attachment: fixed;
  color: var(--color-text);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  -webkit-font-smoothing: antialiased;
}

a {
  color: var(--color-primary);
  text-decoration: none;
}

a:hover {
  color: var(--color-primary-strong);
}

.container {
  max-width: 1200px;
}

.card {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 10px 30px var(--color-shadow);
}

.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  background-color: var(--color-primary);
  color: var(--color-on-primary);
  padding: 0.6rem 1.25rem;
  border-radius: 0.75rem;
  font-weight: 600;
  transition: background-color 0.2s ease, box-shadow 0.2s ease;
}

.btn-primary:hover {
  background-color: var(--color-primary-strong);
  box-shadow: 0 12px 30px rgba(124, 58, 237, 0.25);
}

.btn-secondary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  background-color: var(--color-primary-soft);
  color: var(--color-primary-strong);
  border: 1px solid var(--color-primary-border);
  padding: 0.6rem 1.25rem;
  border-radius: 0.75rem;
  font-weight: 600;
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

.btn-secondary:hover {
  background-color: var(--color-primary-softer);
  border-color: var(--color-primary-strong);
  color: var(--color-primary-strong);
}

.btn-muted {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  background-color: transparent;
  color: var(--color-muted);
  border: 1px solid var(--color-border);
  padding: 0.55rem 1.25rem;
  border-radius: 0.75rem;
  font-weight: 600;
  transition: border-color 0.2s ease, color 0.2s ease, background-color 0.2s ease;
}

.btn-muted:hover {
  border-color: var(--color-primary-border);
  color: var(--color-primary);
  background-color: var(--color-primary-soft);
}

.toast-container {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  z-index: 1000;
}

.toast-item {
  min-width: 240px;
  max-width: 320px;
  background-color: var(--color-surface);
  color: var(--color-text);
  border-radius: 0.75rem;
  padding: 0.75rem 1rem;
  box-shadow: 0 12px 30px rgba(15, 23, 42, 0.1);
  border-left: 4px solid var(--color-primary);
  font-size: 0.9rem;
  font-weight: 500;
}

.toast-item.error {
  border-left-color: var(--color-error);
  background-color: var(--color-error-soft);
  color: #7f1d1d;
}

.toast-item.success {
  border-left-color: var(--color-success);
}

.badge-soft {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  background-color: var(--color-primary-soft);
  color: var(--color-primary-strong);
  border-radius: 9999px;
  padding: 0.25rem 0.75rem;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.05em;
}

/* Override key Tailwind utility colours to follow the active theme */
.bg-blue-600,
.bg-blue-500,
.bg-blue-700 {
  background-color: var(--color-primary) !important;
  color: var(--color-on-primary) !important;
}

.hover\:bg-blue-700:hover,
.hover\:bg-blue-600:hover,
.focus\:bg-blue-700:focus {
  background-color: var(--color-primary-strong) !important;
}

.text-blue-600,
.text-blue-500,
.text-blue-700,
.text-indigo-600,
.text-indigo-700 {
  color: var(--color-primary) !important;
}

.border-blue-600,
.border-blue-500,
.border-blue-400,
.border-blue-300,
.border-indigo-300 {
  border-color: var(--color-primary-border) !important;
}

.hover\:border-blue-400:hover,
.hover\:border-blue-300:hover {
  border-color: var(--color-primary) !important;
}

.bg-blue-100,
.bg-indigo-100 {
  background-color: var(--color-primary-soft) !important;
  color: var(--color-primary-strong) !important;
}

.bg-blue-50 {
  background-color: var(--color-primary-softer) !important;
  color: var(--color-primary-strong) !important;
}

/* Map semantic success/warning/error Tailwind utilities to theme variables */
.text-green-600,
.text-success {
  color: var(--color-success) !important;
}

.bg-green-500,
.bg-success {
  background-color: var(--color-success) !important;
  color: var(--color-on-primary) !important;
}

.bg-green-100 {
  background-color: var(--color-success-soft) !important;
  color: var(--color-success) !important;
}

.text-yellow-600,
.text-warning {
  color: var(--color-warning) !important;
}

.bg-yellow-500,
.bg-warning {
  background-color: var(--color-warning) !important;
  color: #fff !important;
}

.bg-yellow-100 {
  background-color: var(--color-warning-soft) !important;
  color: var(--color-warning) !important;
}

.text-red-600,
.text-error {
  color: var(--color-error) !important;
}

.bg-red-100 {
  background-color: var(--color-error-soft) !important;
  color: var(--color-error) !important;
}

.focus\:ring-blue-500:focus,
.focus\:ring-blue-500:focus-visible,
.focus\:ring-indigo-500:focus,
.focus\:ring-indigo-500:focus-visible {
  --tw-ring-color: var(--color-primary) !important;
}

.shadow-theme {
  box-shadow: 0 12px 30px var(--color-shadow);
}

/* Theme-aware accent utilities used by POS and other pages */
.accent-gradient {
  background: linear-gradient(90deg, var(--color-primary), var(--color-primary-strong));
  color: var(--color-on-primary) !important;
}

.accent-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  background: linear-gradient(90deg, var(--color-primary), var(--color-primary-strong));
  color: var(--color-on-primary) !important;
  padding: 0.6rem 1rem;
  border-radius: 0.5rem;
  font-weight: 700;
  transition: transform 0.12s ease, box-shadow 0.12s ease;
}

.accent-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.08);
}

.accent-outline {
  background: transparent;
  border: 1px solid var(--color-primary-border);
  color: var(--color-primary-strong);
}

/* Adjust mobile button sizing to be more compact while remaining tappable.
   This reduces the large mobile button footprints introduced earlier that
   made many CTAs feel oversized on small screens. We still keep a sensible
   minimum tap target but prefer slightly tighter paddings and smaller icons. */
@media (max-width: 640px) {
  /* common inline-flex buttons with icons */
  .inline-flex.items-center,
  .inline-flex.items-center.gap-2,
  .inline-flex.items-center.gap-3,
  .inline-flex.items-center.gap-4,
  .btn-primary,
  .btn-secondary,
  .btn-muted {
    font-size: 0.925rem !important; /* slightly smaller text on mobile */
    padding-top: 0.35rem !important;
    padding-bottom: 0.35rem !important;
    min-height: 36px !important; /* more compact but still touchable */
  }

  /* reduce horizontal padding for rounded/full buttons */
  .px-4.py-2,
  .px-5.py-2,
  .rounded-full.px-4.py-2 {
    padding-left: 0.6rem !important;
    padding-right: 0.6rem !important;
    padding-top: 0.35rem !important;
    padding-bottom: 0.35rem !important;
  }

  /* compact icon-only buttons */
  button.p-2,
  .p-2 {
    padding: 0.35rem !important;
    min-width: 36px !important;
    min-height: 36px !important;
  }

  /* reduce icon sizes inside buttons on mobile so text remains primary */
  .inline-flex.items-center svg,
  .inline-flex svg,
  button svg {
    width: 16px !important;
    height: 16px !important;
  }
}
